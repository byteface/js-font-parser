<!DOCTYPE html  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"
      xmlns:svg="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>LOADING FONTS IN HTML</title>

    <!-- // TODO - these 2 into libs    -->
    <script type="text/ecmascript" src="pottis.js"></script>
    <script type="text/ecmascript" src="com/byteface/font/utils/BinaryParser.js"></script>

    <script type="text/ecmascript" src="com/byteface/font/data/RawFont.js"></script>
    <script type="text/ecmascript" src="com/byteface/font/table/TableDirectory.js"></script>
    <script type="text/ecmascript" src="com/byteface/font/table/DirectoryEntry.js"></script>
    <script type="text/ecmascript" src="com/byteface/font/table/TableFactory.js"></script>
    <script type="text/ecmascript" src="com/byteface/font/table/Os2Table.js"></script>    
    <script type="text/ecmascript" src="com/byteface/font/table/Panose.js"></script>    
    <script type="text/ecmascript" src="com/byteface/font/table/Table.js"></script>        
    <script type="text/ecmascript" src="com/byteface/font/table/CmapTable.js"></script>            
    <script type="text/ecmascript" src="com/byteface/font/table/GlyfTable.js"></script>                
    <script type="text/ecmascript" src="com/byteface/font/table/HeadTable.js"></script>                    
    <script type="text/ecmascript" src="com/byteface/font/table/CmapIndexEntry.js"></script>                    
    <script type="text/ecmascript" src="com/byteface/font/table/CmapFormat.js"></script>
    <script type="text/ecmascript" src="com/byteface/font/table/CmapFormat0.js"></script>    
    <script type="text/ecmascript" src="com/byteface/font/table/CmapFormat2.js"></script>
    <script type="text/ecmascript" src="com/byteface/font/table/CmapFormat4.js"></script>
    <script type="text/ecmascript" src="com/byteface/font/table/CmapFormat6.js"></script>
    <script type="text/ecmascript" src="com/byteface/font/table/HheaTable.js"></script>                        
    <script type="text/ecmascript" src="com/byteface/font/table/HmtxTable.js"></script>                        
    <script type="text/ecmascript" src="com/byteface/font/table/LocaTable.js"></script>                        
    <script type="text/ecmascript" src="com/byteface/font/table/NameTable.js"></script>
    <script type="text/ecmascript" src="com/byteface/font/table/NameRecord.js"></script>    
    <script type="text/ecmascript" src="com/byteface/font/table/MaxpTable.js"></script>                            
    <script type="text/ecmascript" src="com/byteface/font/table/PostTable.js"></script>
    <script type="text/ecmascript" src="com/byteface/font/constants/XMLConstants.js"></script>
    <script type="text/ecmascript" src="com/byteface/font/constants/SVGConstants.js"></script>    
    <script type="text/ecmascript" src="com/byteface/font/constants/CSSConstants.js"></script>    
    <script type="text/ecmascript" src="com/byteface/font/SVGFont.js"></script>
    <script type="text/ecmascript" src="com/byteface/font/PrintStream.js"></script>    
    <script type="text/ecmascript" src="com/byteface/font/table/GsubTable.js"></script>
    <script type="text/ecmascript" src="com/byteface/font/table/GlyfSimpleDescript.js"></script>
    <script type="text/ecmascript" src="com/byteface/font/table/GlyfCompositeDescript.js"></script>
    <script type="text/ecmascript" src="com/byteface/font/table/Script.js"></script>
    <script type="text/ecmascript" src="com/byteface/font/table/ScriptRecord.js"></script>
    <script type="text/ecmascript" src="com/byteface/font/data/Point.js"></script>
    <script type="text/ecmascript" src="com/byteface/font/data/GlyphData.js"></script>
    <script type="text/ecmascript" src="com/byteface/font/table/GlyfCompositeComp.js"></script>
        
    <script type="text/ecmascript">
    <![CDATA[
        var pottis = null;
        
        // font loading and parsing
        window.onload = function()
        {
            var file = load_binary_resource("AppleSimple.ttf");
            var bytedata = new a3d.ByteArray( file, a3d.Endian.BIG );
            var font = new RawFont( bytedata );

            var svgF = new SVGFont( font ); // add char range etc
            var svg = document.getElementById( "tutorial" );

            pottis = new Pottis(svg);
//            pottis.readFontSVG( svgF.FONT_DATA );
            
            pottis.importSVG( "test2.svg", "apple" );

  //          pottis.testRead2( "test2.svg", "apple", svgF.FONT_DATA );

            
        }
        
        // load the binary data of the font
        function load_binary_resource(url)
        {
            var req = new XMLHttpRequest();
            req.open( 'GET', url, false );
            req.overrideMimeType( 'text/plain; charset=x-user-defined' );
            req.send(null);


           // alert( "text status:" + req.status);
                                
           // if(req.status != 200) return '';
            
           // alert( "text response:" + req.responseText);
            
            return req.responseText;
        }

    ]]></script>

</head>
<body>
    <h2>LOADING FONTS IN HTML</h2>
    <svg id="tutorial" version="1.1" width="500" height="500" />
    <font size="15" face="AppleSimple">ABCDEFGHIJKLMNOPQRSTUVWXYZ</font>
</body>
</html>